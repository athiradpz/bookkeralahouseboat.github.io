<!DOCTYPE html>
<html lang="en" x-data="houseboatDetail" x-init="init()">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title x-text="boat?.name || 'Houseboat Details'"></title>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <style>
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body class="bg-gray-100 py-10 px-4">

  <div class="max-w-4xl mx-auto" x-show="boat">
    <!-- Main Image -->
    <div class="mb-4">
      <img :src="mainImage" alt="Main Image" class="w-full h-[28rem] object-cover rounded mb-2 cursor-pointer" @click="openLightbox(mainImage, currentThumbIndex)">
    </div>

    <!-- Thumbnails -->
    <div class="flex space-x-2 overflow-x-auto mb-6 scrollbar-hide">
      <template x-for="(thumb, index) in boat.thumbnails" :key="index">
        <img :src="thumb" class="w-24 h-16 object-cover rounded border transform transition duration-300 hover:scale-110 cursor-pointer"
             @click="mainImage = thumb; currentThumbIndex = index">
      </template>
    </div>

    <!-- Lightbox -->
    <div x-show="isLightboxOpen" x-transition class="fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center">
      <button @click="closeLightbox" class="absolute top-5 right-5 text-white text-3xl">&times;</button>
      <button @click="prevImage" class="absolute left-5 text-white text-3xl">&#10094;</button>
      <img :src="lightboxImage" class="max-h-[80vh] max-w-full rounded">
      <button @click="nextImage" class="absolute right-5 text-white text-3xl">&#10095;</button>
    </div>

    <!-- Title and Overview -->
    <h1 class="text-3xl font-bold text-black mb-4" x-text="boat.name"></h1>
    <p class="text-gray-700 mb-6" x-text="boat.description"></p>

    <!-- Amenities -->
    <h2 class="text-xl font-semibold text-gray-800 mb-2">Houseboat Amenities</h2>
    <ul class="grid grid-cols-2 md:grid-cols-3 list-disc pl-5 mb-6">
      <template x-for="amenity in boat.amenities" :key="amenity">
        <li><span class="inline-block w-4 h-4 bg-yellow-400 rounded-full mr-2"></span><span x-text="amenity"></span></li>
      </template>
    </ul>

    <!-- Food Menu -->
    <div class="grid md:grid-cols-2 gap-6 mb-6">
      <div>
        <h2 class="text-xl font-semibold text-gray-800 mb-2">Deluxe Veg Menu</h2>
        <ul class="list-disc pl-5 text-gray-700">
          <template x-for="item in boat.foodMenu.veg" :key="item">
            <li x-text="item"></li>
          </template>
        </ul>
      </div>
      <div>
        <h2 class="text-xl font-semibold text-gray-800 mb-2">Deluxe Non-Veg Menu</h2>
        <ul class="list-disc pl-5 text-gray-700">
          <template x-for="item in boat.foodMenu.nonVeg" :key="item">
            <li x-text="item"></li>
          </template>
        </ul>
      </div>
    </div>

    <!-- Itinerary -->
    <h2 class="text-xl font-semibold text-gray-800 mb-2">Itinerary</h2>
    <ul class="list-disc pl-5 mb-6 text-gray-700">
      <template x-for="item in boat.itinerary" :key="item">
        <li x-text="item"></li>
      </template>
    </ul>

    <!-- Contact Info -->
    <h2 class="text-xl font-semibold text-gray-800 mb-2">Contact Info</h2>
    <p class="text-gray-700">Phone: <span x-text="boat.contact.phone"></span></p>
    <p class="text-gray-700">Email: <span x-text="boat.contact.email"></span></p>

    <!-- Recommendations -->
    <h2 class="text-2xl font-bold text-gray-800 mt-10 mb-4">Similar Houseboats</h2>
    <div class="grid md:grid-cols-2 gap-4">
      <template x-for="rec in recommendedBoats" :key="rec.id">
        <a :href="'houseboat-detail.html?id=' + rec.id" class="bg-white rounded shadow hover:shadow-lg transition overflow-hidden">
          <img :src="rec.mainImage" alt="Houseboat Image" class="w-full h-48 object-cover">
          <div class="p-4">
            <h3 class="text-xl font-semibold mb-1" x-text="rec.name"></h3>
            <p class="text-gray-600" x-text="'Price: ' + rec.price"></p>
            <p class="text-yellow-600" x-text="'Rating: ' + rec.rating + ' ⭐'"></p>
          </div>
        </a>
      </template>
    </div>
  </div>

  <!-- Alpine Script -->
  <script>
    document.addEventListener('alpine:init', () => {
      Alpine.data('houseboatDetail', () => ({
        boat: null,
        mainImage: '',
        isLightboxOpen: false,
        lightboxImage: '',
        currentThumbIndex: 0,
        allHouseboats: [
          {
            id: 5,
            name: 'Deluxe two bedroom',
            type: 'Deluxe',
            bedroom: '2',
            price: '₹10,000 onwards',
            rating: 4.5,
            mainImage: 'images/deluxe/2bed/Wood Cas/1.jpg',
            thumbnails: [
              'images/deluxe/2bed/Wood Cas/10.jpg',
              'images/deluxe/2bed/Wood Cas/11.jpg',
              'images/deluxe/2bed/Wood Cas/12.jpg',
              'images/deluxe/2bed/Wood Cas/2.jpg'
            ],
            description: 'budget friendly',
            amenities: ['9pm-6am AC', 'Dining Area', 'Dining Table', 'Music System', 'Private Bathroom', 'TV in Dining Area'],
            foodMenu: {
              veg: ['Lemon Juice', 'Sambar', 'Mezhukkupuratti', 'Karimeen Fry', 'Pappadam', 'Salad'],
              nonVeg: ['Chicken Roast', 'Dal Curry', 'White Rice', 'Fish Fry', 'Pickle', 'Onion Pakoda']
            },
            itinerary: ['Check-In 12:00 PM', 'Lunch 1:00 PM', 'Cruising 2:00 PM', 'Evening Tea 4:00 PM', 'Anchoring 5:30 PM', 'Dinner 8:30 PM', 'Sunrise 7:00 AM', 'Cruising 8:00 AM', 'Breakfast 8:30 AM', 'Check-Out 9:00 AM'],
            contact: {
              phone: '+91 9995857686',
              email: 'info@bookkeralahouseboat.com'
            }
          }
          // Add more houseboats here
        ],
        get recommendedBoats() {
          return this.allHouseboats.filter(b => b.type === this.boat.type && b.id !== this.boat.id);
        },
        openLightbox(image, index) {
          this.lightboxImage = image;
          this.isLightboxOpen = true;
          this.currentThumbIndex = index;
        },
        closeLightbox() {
          this.isLightboxOpen = false;
        },
        nextImage() {
          if (this.currentThumbIndex < this.boat.thumbnails.length - 1) {
            this.currentThumbIndex++;
          } else {
            this.currentThumbIndex = 0;
          }
          this.lightboxImage = this.boat.thumbnails[this.currentThumbIndex];
        },
        prevImage() {
          if (this.currentThumbIndex > 0) {
            this.currentThumbIndex--;
          } else {
            this.currentThumbIndex = this.boat.thumbnails.length - 1;
          }
          this.lightboxImage = this.boat.thumbnails[this.currentThumbIndex];
        },
        init() {
          const id = new URLSearchParams(window.location.search).get('id');
          this.boat = this.allHouseboats.find(b => b.id == id);
          this.mainImage = this.boat?.mainImage || '';
          this.currentThumbIndex = 0;

          // Keyboard navigation for lightbox
          document.addEventListener('keydown', (e) => {
            if (!this.isLightboxOpen) return;
            if (e.key === 'ArrowRight') this.nextImage();
            else if (e.key === 'ArrowLeft') this.prevImage();
            else if (e.key === 'Escape') this.closeLightbox();
          });
        }
      }))
    });
  </script>

</body>
</html>
